{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div
  id="trust-banner-{{ section.id }}"
  class="trust-banner-container-b {% unless section.settings.full_width %} page-width{% endunless %} {% if section.settings.full_width %}content-container--full-width{% endif %} section-{{ section.id }}-padding color-{{ section.settings.color_scheme }}"
>
  <div class="trust-banner-wrapper-b">
    {% for block in section.blocks %}
      <div class="trust-banner-item-b">
        {% render 'icon-trust-banner-bosies', icon: block.settings.icon %}
        <p>{{ block.settings.text }}</p>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Icon and Text Blocks",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "t:sections.rich-text.settings.full_width.label"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 52
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "Icon Block",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "options": [
            {
              "value": "none",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__1.label"
            },
            {
              "value": "apple",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__2.label"
            },
            {
              "value": "banana",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__3.label"
            },
            {
              "value": "bottle",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__4.label"
            },
            {
              "value": "box",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__5.label"
            },
            {
              "value": "carrot",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__6.label"
            },
            {
              "value": "chat_bubble",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__7.label"
            },
            {
              "value": "check_mark",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__8.label"
            },
            {
              "value": "clipboard",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__9.label"
            },
            {
              "value": "dairy",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__10.label"
            },
            {
              "value": "dairy_free",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__11.label"
            },
            {
              "value": "dryer",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__12.label"
            },
            {
              "value": "delivery",
              "label": "Delivery Bosies"
            },
            {
              "value": "eye",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__13.label"
            },
            {
              "value": "fire",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__14.label"
            },
            {
              "value": "gift",
              "label": "Gift Bosies"
            },
            {
              "value": "globe",
              "label": "Globe Bosies"
            },
            {
              "value": "gluten_free",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__15.label"
            },
            {
              "value": "heart",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__16.label"
            },
            {
              "value": "iron",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__17.label"
            },
            {
              "value": "leaf",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__18.label"
            },
            {
              "value": "leather",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__19.label"
            },
            {
              "value": "lightning_bolt",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__20.label"
            },
            {
              "value": "lipstick",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__21.label"
            },
            {
              "value": "lock",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__22.label"
            },
            {
              "value": "map_pin",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__23.label"
            },
            {
              "value": "nut_free",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__24.label"
            },
            {
              "value": "pants",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__25.label"
            },
            {
              "value": "paw_print",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__26.label"
            },
            {
              "value": "pepper",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__27.label"
            },
            {
              "value": "perfume",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__28.label"
            },
            {
              "value": "plane",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__29.label"
            },
            {
              "value": "plant",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__30.label"
            },
            {
              "value": "price_tag",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__31.label"
            },
            {
              "value": "question_mark",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__32.label"
            },
            {
              "value": "recycle",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__33.label"
            },
            {
              "value": "return",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__34.label"
            },
            {
              "value": "ruler",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__35.label"
            },
            {
              "value": "serving_dish",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__36.label"
            },
            {
              "value": "shirt",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__37.label"
            },
            {
              "value": "shoe",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__38.label"
            },
            {
              "value": "silhouette",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__39.label"
            },
            {
              "value": "snowflake",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__40.label"
            },
            {
              "value": "star",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__41.label"
            },
            {
              "value": "stopwatch",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__42.label"
            },
            {
              "value": "truck",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__43.label"
            },
            {
              "value": "washing",
              "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__44.label"
            }
          ],
          "default": "check_mark",
          "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.label"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Default text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon and Text Blocks - Bosies",
      "category": "Custom"
    }
  ],
  "max_blocks": 3
}
{% endschema %}

{% stylesheet %}
  /* Default styles for mobile devices (below 750px) */
  .trust-banner-container-b {
    overflow: hidden;
    white-space: nowrap;
    position: relative;
  }

  .trust-banner-wrapper-b {
    display: flex;
    transition: transform 0.5s ease-in-out;
  }

  .trust-banner-item-b {
    min-width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .trust-banner-item-b p {
    margin: 0 0.5rem;
    font-size: 1.2rem;
  }

  .trust-banner-item-b .icon-trust-banner {
    fill: rgb(var(--color-foreground));
  }

  .trust-banner-item-b svg {
    width: 1.5rem;
    height: 1.5rem;
    margin-bottom: 0.2rem;
  }

  /* Styles for devices with a minimum width of 750px */
  @media (min-width: 750px) {
    .trust-banner-container-b {
      overflow: visible;
    }

    .trust-banner-wrapper-b {
      display: flex;
      justify-content: center;
      transform: none; /* Disable transform for scrolling */
    }

    .trust-banner-item-b {
      min-width: auto; /* Allow blocks to take natural width */
      margin: 0 3rem 0 3rem;
    }
  }
{% endstylesheet %}

<script>
  (function () {
    var sectionId = '{{ section.id }}';
    var wrapper = document.querySelector('#trust-banner-' + sectionId + ' .trust-banner-wrapper-b');
    var items = wrapper.querySelectorAll('.trust-banner-item-b');
    var currentIndex = 0;
    var directionForward = true;
    var startX = 0;
    var isDragging = false;
    var intervalId = null;

    function scrollToNext() {
      if (window.innerWidth < 750) {
        if (directionForward) {
          if (currentIndex < items.length - 1) {
            currentIndex++;
          } else {
            directionForward = false;
            currentIndex--;
          }
        } else {
          if (currentIndex > 0) {
            currentIndex--;
          } else {
            directionForward = true;
            currentIndex++;
          }
        }
        updateTransform();
      }
    }

    function updateTransform() {
      wrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    function startAutoScroll() {
      if (intervalId) {
        clearInterval(intervalId);
      }
      if (window.innerWidth < 750) {
        intervalId = setInterval(scrollToNext, 3000);
      } else {
        wrapper.style.transform = 'none';
      }
    }

    wrapper.addEventListener('touchstart', function (e) {
      startX = e.touches[0].clientX;
      isDragging = true;
    });

    wrapper.addEventListener('touchmove', function (e) {
      if (!isDragging) return;

      var currentX = e.touches[0].clientX;
      var diffX = startX - currentX;

      if (diffX > 50 && currentIndex < items.length - 1) {
        currentIndex++;
        directionForward = true;
        isDragging = false;
        updateTransform();
      } else if (diffX < -50 && currentIndex > 0) {
        currentIndex--;
        directionForward = false;
        isDragging = false;
        updateTransform();
      }
    });

    wrapper.addEventListener('touchend', function () {
      isDragging = false;
    });

    startAutoScroll();

    window.addEventListener('resize', function () {
      currentIndex = 0;
      directionForward = true;
      startAutoScroll();
    });
  })();
</script>
